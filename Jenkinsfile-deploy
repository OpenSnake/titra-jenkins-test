pipeline {
  agent {label 'node'}

  stages {
    stage('Checkout') {
        steps {
          git 'https://github.com/OpenSnake/titra.git'
            }
        }

    stage('Download Artifact') {
      steps {
        sh 'cp ../build.tar.gz .ansible/titra.tar.gz'
        )
      }
    }

    stage('Deploy') {
      steps {
        sh 'ansible-playbook .ansible/playbook.yaml --vault-password-file secret_password'
      }
    }

  }
}
